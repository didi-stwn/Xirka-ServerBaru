{"ast":null,"code":"var _jsxFileName = \"/home/didisetiawan/Downloads/dd/Xirka-FrontEnd/src/components/content/login.js\";\nimport React from 'react';\nimport logo from './img/logo.png';\nexport default class Login extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      username: '',\n      password: '',\n      gagal: false\n    };\n    this.handleChange = this.handleChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n  }\n\n  handleChange(e) {\n    const _e$target = e.target,\n          name = _e$target.name,\n          value = _e$target.value;\n    this.setState({\n      [name]: value\n    });\n  }\n\n  handleSubmit(e) {\n    e.preventDefault();\n    const _this$state = this.state,\n          username = _this$state.username,\n          password = _this$state.password;\n    let h = new Headers();\n    h.append('Authorization', 'Basic ' + btoa(username + ':' + password));\n    fetch('https://192.168.2.7/smartlock/api/v1/login/', {\n      method: 'GET',\n      headers: h\n    }).then(response => {\n      if (response.status === 200) {\n        sessionStorage.setItem(\"message\", \"admin\");\n        window.location.reload();\n      } else {\n        fetch('http://192.168.2.7:3000/login', {\n          method: 'post',\n          body: 'username=admin&password=bandung123',\n          headers: {\n            'Content-type': 'application/x-www-form-urlencoded'\n          }\n        }).then(response => response.json()).then(data => {\n          let he = new Headers();\n          let token = data.token;\n          he.append('x-access-token', token);\n          fetch('http://192.168.2.7:3000/client', {\n            method: 'GET',\n            headers: he\n          }).then(response => response.json()).then(data => {\n            for (var i = 0; i < data.length; i++) {\n              console.log(data[i]);\n\n              if (username === data[i].username && password === data[i].password) {\n                sessionStorage.setItem(\"message\", data[i].name);\n                window.location.reload();\n                break;\n              } else {\n                this.setState({\n                  gagal: true\n                });\n              }\n            }\n          });\n        });\n      }\n    });\n  }\n\n  render() {\n    document.title = \"Login\";\n    const gagal = this.state.gagal;\n    return React.createElement(\"div\", {\n      className: \"login\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"imglogin\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      src: logo,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76\n      },\n      __self: this\n    })), React.createElement(\"h1\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79\n      },\n      __self: this\n    }, \" LOGIN \"), React.createElement(\"div\", {\n      className: \"formform\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81\n      },\n      __self: this\n    }, React.createElement(\"form\", {\n      onSubmit: this.handleSubmit,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82\n      },\n      __self: this\n    }, React.createElement(\"h2\", {\n      className: \"loginnim\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83\n      },\n      __self: this\n    }, \"Username\"), React.createElement(\"input\", {\n      className: \"inputnim\",\n      name: \"username\",\n      placeholder: \"Username\",\n      onChange: this.handleChange,\n      type: \"text\",\n      required: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85\n      },\n      __self: this\n    }), React.createElement(\"h2\", {\n      className: \"loginpass\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87\n      },\n      __self: this\n    }, \"Password\"), React.createElement(\"input\", {\n      className: \"inputpass\",\n      name: \"password\",\n      placeholder: \"Password\",\n      onChange: this.handleChange,\n      type: \"password\",\n      required: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89\n      },\n      __self: this\n    }), gagal && React.createElement(\"p\", {\n      className: \"gagallogin\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92\n      },\n      __self: this\n    }, \"*username or password is incorrect\"), React.createElement(\"button\", {\n      className: \"submitform\",\n      type: \"submit\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96\n      },\n      __self: this\n    }, \"Login\\xA0\"), React.createElement(\"i\", {\n      className: \"fa fa-sign-in\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99\n      },\n      __self: this\n    }))))));\n  }\n\n}","map":{"version":3,"sources":["/home/didisetiawan/Downloads/dd/Xirka-FrontEnd/src/components/content/login.js"],"names":["React","logo","Login","Component","constructor","props","state","username","password","gagal","handleChange","bind","handleSubmit","e","target","name","value","setState","preventDefault","h","Headers","append","btoa","fetch","method","headers","then","response","status","sessionStorage","setItem","window","location","reload","body","json","data","he","token","i","length","console","log","render","document","title"],"mappings":"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","sourcesContent":["import React from 'react';\nimport logo from './img/logo.png'\n\nexport default class Login extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            username: '',\n            password: '',\n            gagal:false,\n        };\n\n        this.handleChange = this.handleChange.bind(this);\n        this.handleSubmit = this.handleSubmit.bind(this);\n    }\n\n    handleChange(e) {\n        const { name, value } = e.target;\n        this.setState({ [name]: value });\n    }\n\n    handleSubmit(e) {\n        e.preventDefault();\n        const {username, password} = this.state\n        let h= new Headers()\n        h.append ('Authorization', 'Basic ' + btoa(username + ':' + password))\n        fetch('https://192.168.2.7/smartlock/api/v1/login/', {\n           method: 'GET',\n           headers: h\n        })\n        .then(response => {\n            if(response.status === 200) {\n                sessionStorage.setItem(\"message\",\"admin\")\n                window.location.reload()\n            }\n            else{\n                fetch('http://192.168.2.7:3000/login', {\n                    method: 'post',\n                    body: 'username=admin&password=bandung123',\n                    headers: { 'Content-type': 'application/x-www-form-urlencoded' }\n                })\n                .then (response => response.json())\n                .then (data => {\n                    let he= new Headers()\n                    let token = data.token\n                    he.append ('x-access-token', token)\n                    fetch('http://192.168.2.7:3000/client', {\n                        method: 'GET',\n                        headers: he\n                    })\n                    .then(response=>response.json())\n                    .then(data => {\n                        for (var i=0;i<data.length; i++){\n                            console.log(data[i])\n                            if ((username===data[i].username)&&(password===data[i].password)){\n                                sessionStorage.setItem(\"message\",data[i].name)\n                                window.location.reload()\n                                break\n                            }\n                            else{\n                                this.setState({gagal:true})\n                            }\n                        }\n                    }) \n                })\n            }\n        })        \n    }\n    \n    render(){\n        document.title=\"Login\"\n        const {gagal} = this.state;\n        return (\n            <div className=\"login\">\n                <div className=\"imglogin\">\n                    <img src={logo}></img>\n                </div>\n                \n                <h1 > LOGIN </h1>\n\n                <div className=\"formform\">\n                    <form  onSubmit={this.handleSubmit}>\n                        <h2 className=\"loginnim\">Username</h2>\n                        <input className=\"inputnim\" name=\"username\" placeholder=\"Username\"  onChange={this.handleChange} type=\"text\" required/>\n                        <br></br>\n\n                        <h2 className=\"loginpass\">Password</h2>\n                        <input className=\"inputpass\" name=\"password\" placeholder=\"Password\" onChange={this.handleChange} type=\"password\" required/>\n                        <br></br>\n                        {\n                            gagal &&\n                            <p className=\"gagallogin\">*username or password is incorrect</p>\n                        }\n                        <button className=\"submitform\" type=\"submit\"> \n                            <span>\n                                <span>\n                                    Login&nbsp;\n                                </span>\n                                <i className=\"fa fa-sign-in\"> \n                                </i>\n                            </span>\n                        </button>\n                    </form>\n                </div>\n            </div>\n        )\n    } \n}"]},"metadata":{},"sourceType":"module"}