{"ast":null,"code":"var _jsxFileName = \"/home/didisetiawan/Downloads/dd/Xirka-FrontEnd/src/components/content/logpintu.js\";\nimport React, { Component } from 'react';\nimport { MDBDataTable } from 'mdbreact';\nimport { withRouter, Route, Link } from 'react-router-dom';\nimport Daftarlogpintu from './daftarlogpintu';\n\nclass Logpintu extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isidata: [],\n      ins: [],\n      room: [],\n      scardID: '',\n      terminalID: '',\n      startDate: '',\n      endDate: ''\n    };\n    this.handleChange = this.handleChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n  }\n\n  handleChange(e) {\n    const _e$target = e.target,\n          name = _e$target.name,\n          value = _e$target.value;\n    this.setState({\n      [name]: value\n    });\n  }\n\n  handleSubmit(e) {\n    e.preventDefault();\n    const _this$state = this.state,\n          scardID = _this$state.scardID,\n          terminalID = _this$state.terminalID,\n          startDate = _this$state.startDate,\n          endDate = _this$state.endDate;\n    var scardid;\n    var termid;\n    var starttime;\n    var endtime;\n    var filter;\n\n    if (scardID === '') {\n      scardid = '';\n    } else {\n      scardid = '&scard_id=' + scardID;\n    }\n\n    if (terminalID === '') {\n      termid = '';\n    } else {\n      termid = '&term_id=' + terminalID;\n    }\n\n    if (startDate === '') {\n      starttime = '';\n    } else {\n      starttime = '&startdatetime=' + startDate.substring(0, 4) + startDate.substring(5, 7) + startDate.substring(8, 10) + 'T000000+07:00';\n    }\n\n    if (endDate === '') {\n      endtime = '';\n    } else {\n      endtime = '&enddatetime=' + endDate.substring(0, 4) + endDate.substring(5, 7) + endDate.substring(8, 10) + 'T000000+07:00';\n    }\n\n    if (endDate === '' || startDate === '') {\n      if (startDate === '' && endDate !== '') {\n        starttime = '';\n        endtime = '&year=' + endDate.substring(0, 4) + '&month=' + endDate.substring(5, 7) + '&day=' + endDate.substring(8, 10);\n      } else if (endDate === '' && startDate !== '') {\n        starttime = '&year=' + startDate.substring(0, 4) + '&month=' + startDate.substring(5, 7) + '&day=' + startDate.substring(8, 10);\n        endtime = '';\n      } else {\n        starttime = '';\n        endtime = '';\n      }\n    }\n\n    if (endDate !== '' && startDate !== '' && '&year=' + startDate.substring(0, 4) + '&month=' + startDate.substring(5, 7) + '&day=' + startDate.substring(8, 10) === '&year=' + endDate.substring(0, 4) + '&month=' + endDate.substring(5, 7) + '&day=' + endDate.substring(8, 10)) {\n      starttime = '&year=' + startDate.substring(0, 4) + '&month=' + startDate.substring(5, 7) + '&day=' + startDate.substring(8, 10);\n      endtime = '';\n    }\n\n    filter = scardid + termid + starttime + endtime;\n    let username = 'admin';\n    let password = 'bandung123';\n    let h = new Headers();\n    h.append('Authorization', 'Basic ' + btoa(username + ':' + password));\n    fetch('https://192.168.2.7/smartlock/api/v1/smartlockview.json?limit=' + this.props.limit + filter + \"&ob=1\", {\n      method: 'GET',\n      headers: h\n    }).then(response => response.json()).then(data => this.setState({\n      isidata: data.results\n    })); //mengambil instansi berdasarkan scard id\n\n    let he = new Headers();\n    let token = this.props.token;\n    he.append('x-access-token', token);\n    fetch('http://192.168.2.7:3000/card', {\n      method: 'GET',\n      headers: he\n    }).then(response => response.json()).then(data => this.setState({\n      ins: data\n    })); //mengambil ruangan berdasarkan terminal id\n\n    fetch('http://192.168.2.7:3000/terminal', {\n      method: 'GET',\n      headers: he\n    }).then(response => response.json()).then(data => this.setState({\n      room: data\n    }));\n  }\n\n  componentDidMount() {\n    let username = 'admin';\n    let password = 'bandung123';\n    let h = new Headers();\n    h.append('Authorization', 'Basic ' + btoa(username + ':' + password));\n    fetch('https://192.168.2.7/smartlock/api/v1/smartlockview.json?limit=' + this.props.limit + \"&ob=1\", {\n      method: 'GET',\n      headers: h\n    }).then(response => response.json()).then(data => this.setState({\n      isidata: data.results\n    })); //mengambil instansi berdasarkan scard id\n\n    let he = new Headers();\n    let token = this.props.token;\n    he.append('x-access-token', token);\n    fetch('http://192.168.2.7:3000/card', {\n      method: 'GET',\n      headers: he\n    }).then(response => response.json()).then(data => this.setState({\n      ins: data\n    })); //mengambil ruangan berdasarkan terminal id\n\n    fetch('http://192.168.2.7:3000/terminal', {\n      method: 'GET',\n      headers: he\n    }).then(response => response.json()).then(data => this.setState({\n      room: data\n    }));\n  }\n\n  render() {\n    sessionStorage.removeItem(\"login\"); //fungsi status\n\n    function lockstatus(e) {\n      var hasil;\n\n      if (e === 0) {\n        hasil = \"Checked In\";\n      } else if (e === 1) {\n        hasil = \"Checked Out\";\n      } else if (e === 2) {\n        hasil = \"Izin\";\n      } else if (e === 3) {\n        hasil = \"Sakit\";\n      }\n\n      return hasil;\n    } //fungsi ambil nama dari pengguna\n\n\n    function nama(nim1, array) {\n      var hasil;\n      var i;\n\n      for (i = 0; i < array.length; i++) {\n        if (String(nim1) === array[i].card_id) {\n          hasil = array[i].name;\n          break;\n        } else {\n          hasil = 'Tidak Terdaftar';\n        }\n      }\n\n      return hasil;\n    } //fungsi ambil instansi dari pengguna\n\n\n    function instansi(nim1, array) {\n      var hasil;\n      var i;\n\n      for (i = 0; i < array.length; i++) {\n        if (String(nim1) === array[i].card_id) {\n          hasil = array[i].instansi;\n          break;\n        } else {\n          hasil = 'Tidak Terdaftar';\n        }\n      }\n\n      return hasil;\n    } //fungsi ambil ruangan dari ruangan\n\n\n    function ruangan(termid, room) {\n      var ruang;\n      var i;\n\n      for (i = 0; i < room.length; i++) {\n        if (String(termid) === room[i].terminal_id) {\n          ruang = room[i].room;\n          break;\n        } else {\n          ruang = 'Tidak Terdaftar';\n        }\n      }\n\n      return ruang;\n    } //fungsi parsing waktu\n\n\n    function waktu(t) {\n      var tahun, bulan, tanggal, jam, menit, tgl, j, m, date;\n      date = new Date(t);\n      tahun = String(date.getFullYear());\n      var months = [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sept\", \"Oct\", \"Nov\", \"Dec\"];\n      bulan = months[date.getMonth()];\n      tgl = date.getDate();\n\n      if (tgl <= 9) {\n        tanggal = \"0\" + String(tgl);\n      } else {\n        tanggal = String(tgl);\n      }\n\n      j = date.getHours();\n\n      if (j <= 9) {\n        jam = \"0\" + String(j);\n      } else {\n        jam = String(j);\n      }\n\n      m = date.getMinutes();\n\n      if (m <= 9) {\n        menit = \"0\" + String(m);\n      } else {\n        menit = String(m);\n      }\n\n      return bulan + \" \" + tanggal + \", \" + tahun + \" \" + jam + \":\" + menit + \":00\";\n    }\n\n    var x = 1;\n\n    function no(i) {\n      var m = 0;\n      var hasil = m + i;\n      return hasil;\n    }\n\n    const data = {\n      columns: [{\n        label: 'No',\n        field: 'no',\n        sort: 'asc'\n      }, {\n        label: 'Waktu',\n        field: 'waktu',\n        sort: 'asc'\n      }, {\n        label: 'Scard ID',\n        field: 'scardid',\n        sort: 'asc'\n      }, {\n        label: 'NIP/NIM',\n        field: 'nipnim',\n        sort: 'asc'\n      }, {\n        label: 'Nama',\n        field: 'nama',\n        sort: 'asc'\n      }, {\n        label: 'Instansi',\n        field: 'instansi',\n        sort: 'asc'\n      }, {\n        label: 'Terminal ID',\n        field: 'terminalid',\n        sort: 'asc'\n      }, {\n        label: 'Ruangan',\n        field: 'ruangan',\n        sort: 'asc'\n      }, {\n        label: 'Status',\n        field: 'status',\n        sort: 'asc'\n      }],\n      rows: this.state.isidata.map(isi => {\n        return {\n          no: no(x++),\n          waktu: waktu(isi.checked_tm),\n          scardid: isi.scard_id,\n          nipnim: isi.scard_id,\n          nama: nama(isi.scard_id, this.state.ins),\n          instansi: instansi(isi.scard_id, this.state.ins),\n          terminalid: isi.term_id,\n          ruangan: ruangan(isi.term_id, this.state.room),\n          status: lockstatus(isi.lockstatus)\n        };\n      })\n    };\n\n    while (document.cookie.csrftoken === '') {\n      return React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 323\n        },\n        __self: this\n      }, \"loading\");\n    }\n\n    if (sessionStorage.message === \"admin\") {\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 328\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"kotakfilter\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 329\n        },\n        __self: this\n      }, React.createElement(\"form\", {\n        className: \"kotakforminputlogpintu\",\n        onSubmit: this.handleSubmit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 330\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"kotakinputlogpintuscardid\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 331\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 332\n        },\n        __self: this\n      }, \" Scard ID \"), \" \", React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 332\n        },\n        __self: this\n      }), React.createElement(\"input\", {\n        name: \"scardID\",\n        onChange: this.handleChange,\n        className: \"inputformlogpintuscardid\",\n        type: \"text\",\n        placeholder: \"Scard Id\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 333\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"kotakinputlogpintutermid\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 336\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 337\n        },\n        __self: this\n      }, \" Terminal ID \"), \" \", React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 337\n        },\n        __self: this\n      }), React.createElement(\"input\", {\n        name: \"terminalID\",\n        onChange: this.handleChange,\n        className: \"inputformlogpintutermid\",\n        type: \"text\",\n        placeholder: \"Terminal Id\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 338\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"kotakinputlogpintustart\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 341\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 342\n        },\n        __self: this\n      }, \" Start Date \"), \" \", React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 342\n        },\n        __self: this\n      }), React.createElement(\"input\", {\n        name: \"startDate\",\n        onChange: this.handleChange,\n        className: \"inputformlogpintustart\",\n        type: \"date\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 343\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"kotakinputlogpintuend\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 346\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 347\n        },\n        __self: this\n      }, \" End Date \"), \" \", React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 347\n        },\n        __self: this\n      }), React.createElement(\"input\", {\n        name: \"endDate\",\n        onChange: this.handleChange,\n        className: \"inputformlogpintuend\",\n        type: \"date\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 348\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"kotaksubmitlogpintu\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 351\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        className: \"submitformlogpintu\",\n        type: \"submit\",\n        value: \"Filter\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 352\n        },\n        __self: this\n      })))), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 356\n        },\n        __self: this\n      }, React.createElement(Route, {\n        path: \"/logpintu/daftar\",\n        render: () => React.createElement(Daftarlogpintu, {\n          token: this.props.token,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 357\n          },\n          __self: this\n        }),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 357\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"kotaktabellogpintu\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 359\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"kotakdaftarruangan\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 360\n        },\n        __self: this\n      }, React.createElement(Link, {\n        to: \"/logpintu/daftar\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 361\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"daftar\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 362\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        className: \"fa fa-plus\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 363\n        },\n        __self: this\n      }), React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 364\n        },\n        __self: this\n      }, \" Log Pintu \")))), React.createElement(\"div\", {\n        className: \"isitabel\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 368\n        },\n        __self: this\n      }, React.createElement(MDBDataTable, {\n        responsive: true,\n        striped: true,\n        bordered: true,\n        small: true,\n        hover: true,\n        data: data,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 369\n        },\n        __self: this\n      }))), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 379\n        },\n        __self: this\n      }));\n    } else {\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 387\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"kotakfilter\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 388\n        },\n        __self: this\n      }, React.createElement(\"form\", {\n        className: \"kotakforminputlogpintu\",\n        onSubmit: this.handleSubmit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 389\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"kotakinputlogpintuscardid\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 390\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 391\n        },\n        __self: this\n      }, \" Scard ID \"), \" \", React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 391\n        },\n        __self: this\n      }), React.createElement(\"input\", {\n        name: \"scardID\",\n        onChange: this.handleChange,\n        className: \"inputformlogpintuscardid\",\n        type: \"text\",\n        placeholder: \"Scard Id\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 392\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"kotakinputlogpintutermid\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 395\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 396\n        },\n        __self: this\n      }, \" Terminal ID \"), \" \", React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 396\n        },\n        __self: this\n      }), React.createElement(\"input\", {\n        name: \"terminalID\",\n        onChange: this.handleChange,\n        className: \"inputformlogpintutermid\",\n        type: \"text\",\n        placeholder: \"Terminal Id\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 397\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"kotakinputlogpintustart\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 400\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 401\n        },\n        __self: this\n      }, \" Start Date \"), \" \", React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 401\n        },\n        __self: this\n      }), React.createElement(\"input\", {\n        name: \"startDate\",\n        onChange: this.handleChange,\n        className: \"inputformlogpintustart\",\n        type: \"date\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 402\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"kotakinputlogpintuend\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 405\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 406\n        },\n        __self: this\n      }, \" End Date \"), \" \", React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 406\n        },\n        __self: this\n      }), React.createElement(\"input\", {\n        name: \"endDate\",\n        onChange: this.handleChange,\n        className: \"inputformlogpintuend\",\n        type: \"date\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 407\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"kotaksubmitlogpintu\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 410\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        className: \"submitformlogpintu\",\n        type: \"submit\",\n        value: \"Filter\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 411\n        },\n        __self: this\n      })))), React.createElement(\"div\", {\n        className: \"kotaktabellogpintu2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 415\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"isitabel\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 416\n        },\n        __self: this\n      }, React.createElement(MDBDataTable, {\n        responsive: true,\n        striped: true,\n        bordered: true,\n        small: true,\n        hover: true,\n        data: data,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 417\n        },\n        __self: this\n      }))));\n    }\n  }\n\n}\n\nexport default withRouter(Logpintu);","map":{"version":3,"sources":["/home/didisetiawan/Downloads/dd/Xirka-FrontEnd/src/components/content/logpintu.js"],"names":["React","Component","MDBDataTable","withRouter","Route","Link","Daftarlogpintu","Logpintu","constructor","props","state","isidata","ins","room","scardID","terminalID","startDate","endDate","handleChange","bind","handleSubmit","e","target","name","value","setState","preventDefault","scardid","termid","starttime","endtime","filter","substring","username","password","h","Headers","append","btoa","fetch","limit","method","headers","then","response","json","data","results","he","token","componentDidMount","render","sessionStorage","removeItem","lockstatus","hasil","nama","nim1","array","i","length","String","card_id","instansi","ruangan","ruang","terminal_id","waktu","t","tahun","bulan","tanggal","jam","menit","tgl","j","m","date","Date","getFullYear","months","getMonth","getDate","getHours","getMinutes","x","no","columns","label","field","sort","rows","map","isi","checked_tm","scard_id","nipnim","terminalid","term_id","status","document","cookie","csrftoken","message"],"mappings":"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","sourcesContent":["import React,{Component} from 'react';\nimport { MDBDataTable } from 'mdbreact';\nimport {withRouter,Route,Link} from 'react-router-dom';\nimport Daftarlogpintu from './daftarlogpintu';\n\n\n\nclass Logpintu extends Component{\n  constructor(props) {\n    super(props);\n    this.state = {\n      isidata: [],\n      ins: [],\n      room: [],\n      scardID: '',\n      terminalID: '',\n      startDate: '',\n      endDate: '',\n    };\n    this.handleChange = this.handleChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n  }\n\n  handleChange(e) {\n    const { name, value } = e.target;\n    this.setState({ [name]: value });\n  }\n  \n  handleSubmit(e){\n    e.preventDefault();\n\n    const {scardID,terminalID,startDate,endDate} = this.state\n    var scardid\n    var termid\n    var starttime\n    var endtime\n    var filter\n\n    if (scardID===''){\n      scardid=''\n    }\n    else {\n      scardid='&scard_id='+scardID\n    }\n\n    if (terminalID===''){\n      termid=''\n    }\n    else {\n      termid='&term_id='+terminalID\n    }\n    if (startDate===''){\n      starttime=''\n    }\n    else {\n      starttime='&startdatetime='+startDate.substring(0,4)+startDate.substring(5,7)+startDate.substring(8,10)+'T000000+07:00'\n    }\n\n    if (endDate===''){\n      endtime=''\n    }\n    else {\n      endtime='&enddatetime='+endDate.substring(0,4)+endDate.substring(5,7)+endDate.substring(8,10)+'T000000+07:00'\n    }\n\n    if ((endDate==='')||(startDate==='')){\n      if ((startDate==='')&&(endDate!=='')){\n        starttime=''\n        endtime='&year='+endDate.substring(0,4)+'&month='+endDate.substring(5,7)+'&day='+endDate.substring(8,10)\n      }\n      else if ((endDate==='')&&(startDate!=='')){\n        starttime='&year='+startDate.substring(0,4)+'&month='+startDate.substring(5,7)+'&day='+startDate.substring(8,10)\n        endtime=''\n      }\n      else {\n        starttime=''\n        endtime=''\n      }\n    }\n\n    if (((endDate!=='')&&(startDate!==''))&&(('&year='+startDate.substring(0,4)+'&month='+startDate.substring(5,7)+'&day='+startDate.substring(8,10))===('&year='+endDate.substring(0,4)+'&month='+endDate.substring(5,7)+'&day='+endDate.substring(8,10)))){\n      starttime='&year='+startDate.substring(0,4)+'&month='+startDate.substring(5,7)+'&day='+startDate.substring(8,10)\n      endtime=''\n    }\n\n\n\n    filter = scardid+termid+starttime+endtime;\n\n    let username = 'admin';\n    let password = 'bandung123';\n    let h = new Headers();\n    h.append ('Authorization', 'Basic ' + btoa(username + ':' + password))\n    fetch('https://192.168.2.7/smartlock/api/v1/smartlockview.json?limit='+this.props.limit+filter+\"&ob=1\", {\n    method: 'GET',\n    headers: h\n    })\n    .then(response=>response.json())\n    .then(data => this.setState({isidata: data.results}))\n    \n    //mengambil instansi berdasarkan scard id\n    let he= new Headers()\n    let token = this.props.token\n    he.append ('x-access-token', token)\n    fetch('http://192.168.2.7:3000/card', {\n    method: 'GET',\n    headers: he\n    })\n    .then(response=>response.json())\n    .then(data => this.setState({ins: data}))\n\n    //mengambil ruangan berdasarkan terminal id\n    fetch('http://192.168.2.7:3000/terminal', {\n    method: 'GET',\n    headers: he\n    })\n    .then(response=>response.json())\n    .then(data => this.setState({room: data}))\n  }\n\n  componentDidMount(){\n    let username = 'admin';\n    let password = 'bandung123';\n    let h = new Headers();\n    h.append ('Authorization', 'Basic ' + btoa(username + ':' + password))\n    fetch('https://192.168.2.7/smartlock/api/v1/smartlockview.json?limit='+this.props.limit+\"&ob=1\", {\n    method: 'GET',\n    headers: h\n    })\n    .then(response=>response.json())\n    .then(data => this.setState({isidata: data.results}))\n    //mengambil instansi berdasarkan scard id\n        \n    let he= new Headers()\n    let token = this.props.token\n    he.append ('x-access-token', token)\n    fetch('http://192.168.2.7:3000/card', {\n    method: 'GET',\n    headers: he\n    })\n    .then(response=>response.json())\n    .then(data => this.setState({ins: data}))\n    \n    //mengambil ruangan berdasarkan terminal id\n    fetch('http://192.168.2.7:3000/terminal', {\n    method: 'GET',\n    headers: he\n    })\n    .then(response=>response.json())\n    .then(data => this.setState({room: data}))\n  }\n\nrender(){\n  sessionStorage.removeItem(\"login\");\n  //fungsi status\n  function lockstatus(e){\n    var hasil\n    if (e===0){\n      hasil = \"Checked In\"\n    }\n    else if (e===1) {\n      hasil = \"Checked Out\"\n    }\n    else if (e===2) {\n      hasil = \"Izin\"\n    }\n    else if (e===3) {\n      hasil = \"Sakit\"\n    }\n    return hasil\n  }\n  \n  //fungsi ambil nama dari pengguna\n  function nama(nim1,array){\n    var hasil\n    var i\n    for ( i=0; i<array.length; i++){\n      if (String(nim1)===array[i].card_id){\n        hasil = array[i].name\n        break\n      }\n      else {\n        hasil = 'Tidak Terdaftar'\n      }\n    }\n    return hasil\n  }\n\n  //fungsi ambil instansi dari pengguna\n  function instansi(nim1,array){\n    var hasil\n    var i\n    for ( i=0; i<array.length; i++){\n      if (String(nim1)===array[i].card_id){\n        hasil = array[i].instansi\n        break\n      }\n      else {\n        hasil = 'Tidak Terdaftar'\n      }\n    }\n    return hasil\n  }\n  \n  //fungsi ambil ruangan dari ruangan\n  function ruangan(termid,room){\n    var ruang\n    var i\n    for ( i=0; i<room.length; i++){\n      if (String(termid)===room[i].terminal_id){\n        ruang = room[i].room\n        break\n      }\n      else {\n        ruang = 'Tidak Terdaftar'\n      }\n    }\n    return ruang\n  }\n  \n  //fungsi parsing waktu\n  function waktu(t){\n    var tahun,bulan,tanggal,jam,menit,tgl,j,m,date;\n    date = new Date (t)\n    tahun = String(date.getFullYear())\n    var months = [\"Jan\",\"Feb\",\"Mar\",\"Apr\",\"May\",\"Jun\",\"Jul\",\"Aug\",\"Sept\",\"Oct\",\"Nov\",\"Dec\"];\n    bulan = months[(date.getMonth())]\n    tgl = date.getDate()\n    if (tgl <=9){\n      tanggal = \"0\"+String(tgl)\n    }\n    else {\n      tanggal = String(tgl)\n    }\n    j = date.getHours()\n    if (j<=9){\n      jam = \"0\"+String(j)\n    }\n    else {\n      jam = String(j)\n    }\n    m = date.getMinutes()\n    if (m<=9){\n      menit = \"0\"+String(m)\n    }\n    else {\n      menit = String(m)\n    }\n    return bulan+\" \"+tanggal+\", \"+tahun+\" \"+jam+\":\"+menit+\":00\"\n  }\n  \n  var x=1;\n\n  function no(i){\n    var m=0\n    var hasil=m+i\n    return  hasil\n  }\n\n  const data = {\n    columns: [\n      {\n        label: 'No',\n        field: 'no',\n        sort: 'asc',\n      },\n      {\n        label: 'Waktu',\n        field: 'waktu',\n        sort: 'asc',\n      },\n      {\n        label: 'Scard ID',\n        field: 'scardid',\n        sort: 'asc',\n      },\n      {\n        label: 'NIP/NIM',\n        field: 'nipnim',\n        sort: 'asc',\n      },\n      {\n        label: 'Nama',\n        field: 'nama',\n        sort: 'asc',\n      },\n      {\n        label: 'Instansi',\n        field: 'instansi',\n        sort: 'asc',\n      },\n      {\n        label: 'Terminal ID',\n        field: 'terminalid',\n        sort: 'asc',\n      },\n      {\n        label: 'Ruangan',\n        field: 'ruangan',\n        sort: 'asc',\n      },\n      {\n        label: 'Status',\n        field: 'status',\n        sort: 'asc',\n      }\n    ],\n    rows:this.state.isidata.map(isi=>{\n      return{\n        no:no(x++),\n        waktu: waktu(isi.checked_tm),\n        scardid:isi.scard_id,\n        nipnim:isi.scard_id,\n        nama:nama(isi.scard_id,this.state.ins),\n        instansi: instansi(isi.scard_id,this.state.ins),\n        terminalid: isi.term_id,\n        ruangan: ruangan(isi.term_id,this.state.room),\n        status: lockstatus(isi.lockstatus),\n      }\n    })\n  };\n  while (document.cookie.csrftoken===''){\n    return (<span>loading</span>)\n  }  \n\n  if (sessionStorage.message===\"admin\"){\n    return (\n      <div>\n        <div className=\"kotakfilter\"> \n          <form className=\"kotakforminputlogpintu\" onSubmit={this.handleSubmit}>\n            <div className=\"kotakinputlogpintuscardid\">\n              <label> Scard ID </label> <br></br>\n              <input name=\"scardID\" onChange={this.handleChange} className=\"inputformlogpintuscardid\" type=\"text\" placeholder=\"Scard Id\"></input>\n            </div>\n            \n            <div className=\"kotakinputlogpintutermid\">\n              <label> Terminal ID </label> <br></br>\n              <input name=\"terminalID\" onChange={this.handleChange} className=\"inputformlogpintutermid\" type=\"text\" placeholder=\"Terminal Id\"></input>\n            </div>\n  \n            <div className=\"kotakinputlogpintustart\">\n              <label> Start Date </label> <br></br>\n              <input name=\"startDate\" onChange={this.handleChange} className=\"inputformlogpintustart\" type=\"date\" ></input>\n            </div> \n            \n            <div className=\"kotakinputlogpintuend\">\n              <label> End Date </label> <br></br>\n              <input name=\"endDate\" onChange={this.handleChange} className=\"inputformlogpintuend\" type=\"date\"></input>\n            </div>\n            \n            <div className=\"kotaksubmitlogpintu\">\n              <input className=\"submitformlogpintu\" type=\"submit\" value=\"Filter\"></input>\n            </div>\n          </form> \n        </div>\n        <div>\n          <Route path=\"/logpintu/daftar\" render={ () => <Daftarlogpintu token={this.props.token} /> } />\n        </div>      \n        <div className=\"kotaktabellogpintu\">\n            <div className=\"kotakdaftarruangan\">\n                <Link to=\"/logpintu/daftar\">\n                  <div className=\"daftar\">\n                    <i className=\"fa fa-plus\"></i> \n                    <span> Log Pintu </span>\n                  </div>\n                </Link>\n            </div>\n            <div className=\"isitabel\">\n              <MDBDataTable\n                responsive\n                striped\n                bordered\n                small\n                hover\n                data={data}\n              />\n            </div>   \n        </div>\n        <div>\n            \n        </div>\n      </div>\n    );\n  }\n  else{\n    return (\n      <div>  \n        <div className=\"kotakfilter\"> \n          <form className=\"kotakforminputlogpintu\" onSubmit={this.handleSubmit}>\n            <div className=\"kotakinputlogpintuscardid\">\n              <label> Scard ID </label> <br></br>\n              <input name=\"scardID\" onChange={this.handleChange} className=\"inputformlogpintuscardid\" type=\"text\" placeholder=\"Scard Id\"></input>\n            </div>\n            \n            <div className=\"kotakinputlogpintutermid\">\n              <label> Terminal ID </label> <br></br>\n              <input name=\"terminalID\" onChange={this.handleChange} className=\"inputformlogpintutermid\" type=\"text\" placeholder=\"Terminal Id\"></input>\n            </div>\n  \n            <div className=\"kotakinputlogpintustart\">\n              <label> Start Date </label> <br></br>\n              <input name=\"startDate\" onChange={this.handleChange} className=\"inputformlogpintustart\" type=\"date\" ></input>\n            </div> \n            \n            <div className=\"kotakinputlogpintuend\">\n              <label> End Date </label> <br></br>\n              <input name=\"endDate\" onChange={this.handleChange} className=\"inputformlogpintuend\" type=\"date\"></input>\n            </div>\n            \n            <div className=\"kotaksubmitlogpintu\">\n              <input className=\"submitformlogpintu\" type=\"submit\" value=\"Filter\"></input>\n            </div>\n          </form> \n        </div>   \n        <div className=\"kotaktabellogpintu2\">\n            <div className=\"isitabel\">\n              <MDBDataTable\n                responsive\n                striped\n                bordered\n                small\n                hover\n                data={data}\n              />\n            </div>   \n        </div>\n      </div>\n    );\n  }\n\n  \n  }\n}\n\nexport default withRouter(Logpintu);"]},"metadata":{},"sourceType":"module"}