{"ast":null,"code":"var _jsxFileName = \"/home/didisetiawan/Downloads/dd/Xirka-ServerBaru/src/components/content/logpintu.js\";\nimport React, { Component } from 'react';\nimport { MDBDataTable } from 'mdbreact';\nimport { withRouter, Route, Link, Switch } from 'react-router-dom';\nimport Daftarlogpintu from './daftarlogpintu';\nimport Editlogpintu from './editlogpintu';\n\nclass Logpintu extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      sort: 'nim',\n      ascdsc: 'asc',\n      pagesize: 10,\n      pagee: 1,\n      startDate: new Date('2019-02-13'),\n      endDate: new Date(),\n      isidata: [],\n      daftar: false,\n      edit: false\n    };\n  }\n\n  componentDidMount() {\n    const _this$state = this.state,\n          sort = _this$state.sort,\n          ascdsc = _this$state.ascdsc,\n          pagesize = _this$state.pagesize,\n          pagee = _this$state.pagee,\n          startDate = _this$state.startDate,\n          endDate = _this$state.endDate;\n    fetch('http://192.168.2.7:8020/doorlog/getlogapi/', {\n      method: 'post',\n      headers: {\n        \"Authorization\": \"Bearer \" + sessionStorage.name,\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        sort_by: sort,\n        ascordsc: ascdsc,\n        page_size: pagesize,\n        page: pagee,\n        date_start: startDate,\n        date_end: endDate\n      })\n    }).then(response => response.json()).then(response => this.setState({\n      isidata: response.list\n    }));\n  }\n\n  componentDidUpdate() {\n    fetch('http://192.168.2.7:8020/doorlog/getlogapi/', {\n      method: 'post',\n      headers: {\n        \"Authorization\": \"Bearer \" + sessionStorage.name,\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        sort_by: \"nim\",\n        ascordsc: \"asc\",\n        page_size: 10,\n        page: 1,\n        date_start: \"2019-02-13\",\n        date_end: \"2019-07-10\"\n      })\n    }).then(response => response.json()).then(response => this.setState({\n      isidata: response.list\n    }));\n  }\n\n  render() {\n    const _this$state2 = this.state,\n          isidata = _this$state2.isidata,\n          editID = _this$state2.editID,\n          daftar = _this$state2.daftar,\n          edit = _this$state2.edit,\n          startDate = _this$state2.startDate,\n          endDate = _this$state2.endDate;\n    var start = startDate.getFullYear() + \"-\" + (startDate.getMonth() + 1) + \"-\" + startDate.getDate();\n    console.log(start);\n    console.log(endDate);\n    var x = 1;\n\n    function no(i) {\n      var m = 0;\n      var hasil = m + i;\n      return hasil;\n    }\n\n    const data = {\n      columns: [{\n        label: 'No',\n        field: 'no',\n        sort: 'asc'\n      }, {\n        label: 'NIM',\n        field: 'nim',\n        sort: 'asc'\n      }, {\n        label: 'Nama',\n        field: 'nama',\n        sort: 'asc'\n      }, {\n        label: 'ID Ruangan',\n        field: 'idruangan',\n        sort: 'asc'\n      }, {\n        label: 'Nama Ruangan',\n        field: 'namaruangan',\n        sort: 'asc'\n      }, {\n        label: 'Tanggal',\n        field: 'tanggal',\n        sort: 'asc'\n      }, {\n        label: 'Waktu',\n        field: 'waktu',\n        sort: 'asc'\n      }, {\n        label: 'Status',\n        field: 'status',\n        sort: 'asc'\n      }, {\n        label: 'Method',\n        field: 'method',\n        sort: 'asc'\n      }, {\n        label: 'Keterangan',\n        field: 'keterangan'\n      }],\n      rows: this.state.isidata.map(isi => {\n        return {\n          no: no(x++),\n          nim: isi.nim,\n          nama: isi.nim,\n          koderuangan: isi.nim,\n          namaruangan: isi.nim,\n          tanggal: isi.nim,\n          waktu: isi.nim,\n          status: isi.nim,\n          method: isi.nim,\n          keterangan: React.createElement(\"div\", {\n            className: \"editdelete\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 140\n            },\n            __self: this\n          }, \" \", React.createElement(\"a\", {\n            onClick: () => this.showEdit(isi.nim),\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 140\n            },\n            __self: this\n          }, React.createElement(\"i\", {\n            className: \"fa fa-pencil\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 140\n            },\n            __self: this\n          })), \" | \", React.createElement(\"a\", {\n            className: \"mousepointer\",\n            onClick: () => this.deleteData(isi.nim, isi.nama),\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 140\n            },\n            __self: this\n          }, \" \", React.createElement(\"i\", {\n            className: \"fa fa-trash\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 140\n            },\n            __self: this\n          })), \" \")\n        };\n      })\n    };\n    var aksidata;\n\n    if (daftar === true) {\n      aksidata = \"show\";\n    } else if (edit === true) {\n      aksidata = \"show\";\n    } else {\n      aksidata = \"hide\";\n    }\n\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156\n      },\n      __self: this\n    }, React.createElement(Switch, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157\n      },\n      __self: this\n    }, React.createElement(Route, {\n      path: \"/logpintu/daftar\",\n      render: () => React.createElement(Daftarlogpintu, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 158\n        },\n        __self: this\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158\n      },\n      __self: this\n    }), React.createElement(Route, {\n      path: \"/logpintu/edit\",\n      render: () => React.createElement(Editlogpintu, {\n        editID: editID,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 159\n        },\n        __self: this\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159\n      },\n      __self: this\n    }))), React.createElement(\"div\", {\n      className: \"box-footer\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"kotakdaftarruangan\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163\n      },\n      __self: this\n    }, React.createElement(Link, {\n      to: \"/logpintu/daftar\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"daftar\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      className: \"fa fa-plus\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166\n      },\n      __self: this\n    }), React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167\n      },\n      __self: this\n    }, \" Ruangan \"))), React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170\n      },\n      __self: this\n    }, React.createElement(\"a\", {\n      onClick: () => this.refresh(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"daftar2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      className: \"fa fa-refresh\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173\n      },\n      __self: this\n    }))))), React.createElement(\"div\", {\n      id: aksidata,\n      className: \"kotakdata\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"isitabel\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179\n      },\n      __self: this\n    }, React.createElement(MDBDataTable, {\n      responsive: true,\n      displayEntries: false,\n      info: false,\n      paging: false,\n      striped: true,\n      bordered: true,\n      small: true,\n      hover: true,\n      theadColor: \"\",\n      data: data,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180\n      },\n      __self: this\n    })))));\n  }\n\n}\n\nexport default withRouter(Logpintu);","map":{"version":3,"sources":["/home/didisetiawan/Downloads/dd/Xirka-ServerBaru/src/components/content/logpintu.js"],"names":["React","Component","MDBDataTable","withRouter","Route","Link","Switch","Daftarlogpintu","Editlogpintu","Logpintu","constructor","props","state","sort","ascdsc","pagesize","pagee","startDate","Date","endDate","isidata","daftar","edit","componentDidMount","fetch","method","headers","sessionStorage","name","body","JSON","stringify","sort_by","ascordsc","page_size","page","date_start","date_end","then","response","json","setState","list","componentDidUpdate","render","editID","start","getFullYear","getMonth","getDate","console","log","x","no","i","m","hasil","data","columns","label","field","rows","map","isi","nim","nama","koderuangan","namaruangan","tanggal","waktu","status","keterangan","showEdit","deleteData","aksidata","refresh"],"mappings":"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","sourcesContent":["import React,{Component} from 'react';\nimport { MDBDataTable } from 'mdbreact';\nimport {withRouter,Route,Link,Switch} from 'react-router-dom';\nimport Daftarlogpintu from './daftarlogpintu';\nimport Editlogpintu from './editlogpintu';\n\n\n\nclass Logpintu extends Component{\n  constructor(props) {\n    super(props);\n    this.state = {\n      sort:'nim',\n      ascdsc:'asc',\n      pagesize: 10,\n      pagee: 1,\n      startDate: new Date('2019-02-13'),\n      endDate: new Date(),\n      isidata: [],\n      daftar:false,\n      edit:false,\n    };\n  }\n\n  componentDidMount(){\n    const {sort,ascdsc,pagesize,pagee,startDate,endDate}=this.state\n    fetch('http://192.168.2.7:8020/doorlog/getlogapi/', {\n      method: 'post',\n      headers :{\n        \"Authorization\" : \"Bearer \"+ sessionStorage.name,\n        \"Content-Type\" : \"application/json\"\n      },\n      body: JSON.stringify({\n        sort_by: sort,\n        ascordsc: ascdsc,\n        page_size: pagesize,\n        page: pagee,\n        date_start: startDate,\n        date_end: endDate\n      })\n    })\n    .then (response =>response.json())  \n    .then (response =>this.setState({isidata:response.list}))\n  }\n\n  componentDidUpdate(){\n    fetch('http://192.168.2.7:8020/doorlog/getlogapi/', {\n      method: 'post',\n      headers :{\n        \"Authorization\" : \"Bearer \"+ sessionStorage.name,\n        \"Content-Type\" : \"application/json\"\n      },\n      body: JSON.stringify({\n        sort_by: \"nim\",\n        ascordsc: \"asc\",\n        page_size: 10,\n        page: 1,\n        date_start: \"2019-02-13\",\n        date_end:\"2019-07-10\"\n      })\n    })\n    .then (response =>response.json())  \n    .then (response =>this.setState({isidata:response.list}))\n  }\n\n  render(){\n    const {isidata,editID,daftar,edit,startDate,endDate} = this.state\n    var start=startDate.getFullYear()+\"-\"+(startDate.getMonth()+1)+\"-\"+startDate.getDate()\n    console.log(start)\n    console.log(endDate)\n    var x = 1;\n    function no(i){\n      var m=0\n      var hasil=m+i\n      return  hasil\n    }\n    const data = {\n      columns: [\n        {\n          label: 'No',\n          field: 'no',\n          sort: 'asc',\n        },\n        {\n          label: 'NIM',\n          field: 'nim',\n          sort: 'asc',\n        },\n        {\n          label: 'Nama',\n          field: 'nama',\n          sort: 'asc',\n        },\n        {\n          label: 'ID Ruangan',\n          field: 'idruangan',\n          sort: 'asc',\n        },\n        {\n          label: 'Nama Ruangan',\n          field: 'namaruangan',\n          sort: 'asc',\n        },\n        {\n          label: 'Tanggal',\n          field: 'tanggal',\n          sort: 'asc',\n        },\n        {\n          label: 'Waktu',\n          field: 'waktu',\n          sort: 'asc',\n        },\n        {\n          label: 'Status',\n          field: 'status',\n          sort: 'asc',\n        },\n        {\n          label: 'Method',\n          field: 'method',\n          sort: 'asc',\n        },\n        {\n          label: 'Keterangan',\n          field: 'keterangan'\n        }\n      ],\n      rows: this.state.isidata.map(isi=>{\n        return {\n          no:no(x++),\n          nim: isi.nim,\n          nama: isi.nim,\n          koderuangan: isi.nim,\n          namaruangan: isi.nim,\n          tanggal: isi.nim,\n          waktu: isi.nim,\n          status: isi.nim,\n          method: isi.nim,\n          keterangan:<div className=\"editdelete\"> <a onClick={() => this.showEdit(isi.nim)}><i className=\"fa fa-pencil\"></i></a> | <a className=\"mousepointer\" onClick={() => this.deleteData(isi.nim,isi.nama)}> <i className=\"fa fa-trash\"></i></a> </div>\n        }\n      })\n    };\n    var aksidata\n    if (daftar===true){\n      aksidata = \"show\"\n    }\n    else if (edit===true){\n      aksidata = \"show\"\n    }\n    else {\n      aksidata = \"hide\"\n    }\n    return(\n      <div>\n          <div>\n            <Switch>\n              <Route path=\"/logpintu/daftar\" render={ () => <Daftarlogpintu/> } />\n              <Route path=\"/logpintu/edit\" render={ () => <Editlogpintu editID={editID}/> } />\n            </Switch>\n          </div>\n          <div className=\"box-footer\">\n              <div className=\"kotakdaftarruangan\">\n                <Link to=\"/logpintu/daftar\">\n                  <div className=\"daftar\">\n                    <i className=\"fa fa-plus\"></i> \n                    <span> Ruangan </span>\n                  </div>\n                </Link>\n                <span>\n                  <a onClick={() => this.refresh()}>\n                    <div className=\"daftar2\">\n                      <i className=\"fa fa-refresh\"></i>\n                    </div>\n                  </a>\n                </span>\n              </div>\n              <div id={aksidata} className=\"kotakdata\">\n                <div className=\"isitabel\">\n                  <MDBDataTable\n                  responsive\n                  displayEntries={false}\n                  info={false}\n                  paging={false}\n                  striped\n                  bordered\n                  small\n                  hover\n                  theadColor={\"\"}\n                  data={data}\n                  />\n                </div>  \n            </div> \n          </div>\n      </div>\n    )\n  } \n}\n\nexport default withRouter(Logpintu);"]},"metadata":{},"sourceType":"module"}