{"ast":null,"code":"var _jsxFileName = \"/home/didisetiawan/Downloads/dd/Xirka-ServerBaru/src/components/content/ruanganuser.js\";\nimport React, { Component } from 'react';\nimport { MDBDataTable } from 'mdbreact';\nimport { Route, Link, withRouter, Switch } from \"react-router-dom\";\nimport \"@fortawesome/fontawesome-free/css/all.min.css\";\nimport Daftarruanganuser from './daftarruanganuser';\n\nclass Ruanganuser extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      idl: '',\n      isidata: [],\n      dataruangan: [],\n      daftar: false,\n      idc: '',\n      namac: '',\n      datasalah: false,\n      databenar: false\n    };\n    this.handleChange = this.handleChange.bind(this);\n    this.handleSubmitDaftar = this.handleSubmitDaftar.bind(this);\n    this.handleSubmitList = this.handleSubmitList.bind(this);\n  }\n\n  handleChange(e) {\n    const _e$target = e.target,\n          name = _e$target.name,\n          value = _e$target.value;\n    this.setState({\n      [name]: value\n    });\n  }\n\n  handleSubmitList(e) {\n    e.preventDefault();\n    const idl = this.state.idl;\n\n    if (idl !== '' && idl !== \"Pilih ID Ruangan\") {\n      fetch('http://192.168.2.7:8020/doorlog/users/', {\n        method: 'post',\n        headers: {\n          \"Authorization\": \"Bearer \" + sessionStorage.name,\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          id_ruangan: idl\n        })\n      }).then(response => response.json()).then(response => this.setState({\n        isidata: response.list\n      }));\n    }\n  }\n\n  handleSubmitDaftar(e) {\n    e.preventDefault();\n    const _this$state = this.state,\n          nimc = _this$state.nimc,\n          idc = _this$state.idc;\n    fetch('http://192.168.2.7:8020/doorlog/createPermission/', {\n      method: 'post',\n      headers: {\n        \"Authorization\": \"Bearer \" + sessionStorage.name,\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        nim: nimc,\n        id_ruangan: idc\n      })\n    }).then(response => {\n      if (response.ok) {\n        this.setState({\n          databenar: true\n        });\n        this.setState({\n          datasalah: false\n        });\n      } else {\n        this.setState({\n          datasalah: true\n        });\n        this.setState({\n          databenar: false\n        });\n      }\n    });\n  }\n\n  componentDidMount() {\n    fetch('http://192.168.2.7:8020/doorlog/rooms/', {\n      method: 'post',\n      headers: {\n        \"Authorization\": \"Bearer \" + sessionStorage.name,\n        \"Content-Type\": \"application/json\"\n      }\n    }).then(response => response.json()).then(response => this.setState({\n      dataruangan: response.list\n    }));\n  }\n\n  refresh() {\n    const idl = this.state.idl;\n\n    if (idl !== '' && idl !== \"Pilih ID Ruangan\") {\n      fetch('http://192.168.2.7:8020/doorlog/users/', {\n        method: 'post',\n        headers: {\n          \"Authorization\": \"Bearer \" + sessionStorage.name,\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          id_ruangan: idl\n        })\n      }).then(response => response.json()).then(response => this.setState({\n        isidata: response.list\n      }));\n    }\n  }\n\n  deleteData(e, f) {\n    const idl = this.state.idl;\n    var yes = window.confirm(\"Apakah anda yakin ingin menghapus data berikut: NIM = \" + e + \", ID Ruangan= \" + f);\n\n    if (yes === true) {\n      fetch('http://192.168.2.7:8020/doorlog/deletePermission/', {\n        method: 'post',\n        headers: {\n          \"Authorization\": \"Bearer \" + sessionStorage.name,\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          nim: e,\n          id_ruangan: idl\n        })\n      }).then(response => {\n        if (response.ok) {\n          window.alert(\"Data berhasil dihapus\");\n        } else {\n          window.alert(\"Data tidak berhasil dihapus\");\n        }\n      });\n    }\n  }\n\n  render() {\n    const _this$state2 = this.state,\n          isidata = _this$state2.isidata,\n          idl = _this$state2.idl,\n          dataruangan = _this$state2.dataruangan;\n    var x = 1;\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137\n      },\n      __self: this\n    }, React.createElement(Switch, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138\n      },\n      __self: this\n    }, React.createElement(Route, {\n      path: \"/ruanganuser/daftar\",\n      render: () => React.createElement(Daftarruanganuser, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139\n        },\n        __self: this\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139\n      },\n      __self: this\n    }))), React.createElement(\"div\", {\n      className: \"box-footer\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143\n      },\n      __self: this\n    }, React.createElement(\"form\", {\n      onSubmit: this.handleSubmitList,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145\n      },\n      __self: this\n    }, \"ID Ruangan\"), React.createElement(\"select\", {\n      name: \"idl\",\n      onChange: this.handleChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146\n      },\n      __self: this\n    }, React.createElement(\"option\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147\n      },\n      __self: this\n    }, \"Pilih ID Ruangan\"), dataruangan.map(isi => React.createElement(\"option\", {\n      key: isi.kode_ruangan,\n      value: isi.kode_ruangan,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149\n      },\n      __self: this\n    }, isi.kode_ruangan))), React.createElement(\"button\", {\n      type: \"submit\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152\n      },\n      __self: this\n    }, \"Cari\"))), React.createElement(\"div\", {\n      className: \"kotakdaftarruangan\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155\n      },\n      __self: this\n    }, React.createElement(Link, {\n      to: \"/ruanganuser/daftar\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"daftar\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      className: \"fa fa-plus\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158\n      },\n      __self: this\n    }), React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159\n      },\n      __self: this\n    }, \" Ruangan \"))), React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162\n      },\n      __self: this\n    }, React.createElement(\"a\", {\n      onClick: () => this.refresh(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"daftar2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      className: \"fa fa-refresh\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165\n      },\n      __self: this\n    }))))), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170\n      },\n      __self: this\n    }, React.createElement(\"table\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171\n      },\n      __self: this\n    }, React.createElement(\"thead\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172\n      },\n      __self: this\n    }, React.createElement(\"tr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173\n      },\n      __self: this\n    }, React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174\n      },\n      __self: this\n    }, \"No\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175\n      },\n      __self: this\n    }, \"Pengguna\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176\n      },\n      __self: this\n    }, \"Hapus\"))), React.createElement(\"tbody\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179\n      },\n      __self: this\n    }, isidata.map(isi => React.createElement(\"tr\", {\n      key: isi.pengguna,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181\n      },\n      __self: this\n    }, React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182\n      },\n      __self: this\n    }, x++), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183\n      },\n      __self: this\n    }, isi.pengguna), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"editdelete\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185\n      },\n      __self: this\n    }, React.createElement(\"a\", {\n      className: \"mousepointer\",\n      onClick: () => this.deleteData(isi.pengguna, idl),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      className: \"fa fa-trash\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187\n      },\n      __self: this\n    })))))))))));\n  }\n\n}\n\nexport default withRouter(Ruanganuser);","map":{"version":3,"sources":["/home/didisetiawan/Downloads/dd/Xirka-ServerBaru/src/components/content/ruanganuser.js"],"names":["React","Component","MDBDataTable","Route","Link","withRouter","Switch","Daftarruanganuser","Ruanganuser","constructor","props","state","idl","isidata","dataruangan","daftar","idc","namac","datasalah","databenar","handleChange","bind","handleSubmitDaftar","handleSubmitList","e","target","name","value","setState","preventDefault","fetch","method","headers","sessionStorage","body","JSON","stringify","id_ruangan","then","response","json","list","nimc","nim","ok","componentDidMount","refresh","deleteData","f","yes","window","confirm","alert","render","x","map","isi","kode_ruangan","pengguna"],"mappings":"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","sourcesContent":["import React,{Component} from 'react';\nimport { MDBDataTable } from 'mdbreact';\nimport {Route,Link,withRouter,Switch} from \"react-router-dom\";\n\nimport \"@fortawesome/fontawesome-free/css/all.min.css\";\nimport Daftarruanganuser from './daftarruanganuser';\n\nclass Ruanganuser extends Component{\n  constructor(props) {\n    super(props);\n    this.state = {\n        idl:'',\n        isidata: [],\n        dataruangan: [],\n        daftar: false,\n        idc:'',\n        namac:'',\n        datasalah: false,\n        databenar: false,\n    };\n    this.handleChange = this.handleChange.bind(this);\n    this.handleSubmitDaftar = this.handleSubmitDaftar.bind(this);\n    this.handleSubmitList = this.handleSubmitList.bind(this);\n  }\n\n  handleChange(e) {\n    const { name, value } = e.target;\n    this.setState({ [name]: value });\n  }\n\n  handleSubmitList(e){\n    e.preventDefault();\n    const {idl} = this.state\n    if ((idl!=='')&&(idl!==\"Pilih ID Ruangan\")){\n        fetch('http://192.168.2.7:8020/doorlog/users/', {\n      method: 'post',\n      headers :{\n        \"Authorization\" : \"Bearer \"+ sessionStorage.name,\n        \"Content-Type\" : \"application/json\"\n      },\n      body: JSON.stringify({\n        id_ruangan: idl,\n      })\n    })\n    .then (response =>response.json())  \n    .then (response =>this.setState({isidata:response.list}))\n    }\n  }\n\n  handleSubmitDaftar(e){\n    e.preventDefault();\n    const {nimc,idc} = this.state\n    fetch('http://192.168.2.7:8020/doorlog/createPermission/', {\n      method: 'post',\n      headers :{\n        \"Authorization\" : \"Bearer \"+ sessionStorage.name,\n        \"Content-Type\" : \"application/json\"\n      },\n      body: JSON.stringify({\n        nim: nimc,\n        id_ruangan: idc\n      })\n    })\n    .then(response => {\n      if (response.ok){\n        this.setState({databenar:true})\n        this.setState({datasalah:false})\n      }\n      else {\n        this.setState({datasalah:true})\n        this.setState({databenar:false})\n      }\n    })\n  }\n\n  componentDidMount(){\n    fetch('http://192.168.2.7:8020/doorlog/rooms/', {\n      method: 'post',\n      headers :{\n        \"Authorization\" : \"Bearer \"+ sessionStorage.name,\n        \"Content-Type\" : \"application/json\"\n      },\n    })\n    .then (response =>response.json())  \n    .then (response =>this.setState({dataruangan:response.list}))\n  }\n\n  refresh(){\n    const {idl} = this.state\n    if ((idl!=='')&&(idl!==\"Pilih ID Ruangan\")){\n        fetch('http://192.168.2.7:8020/doorlog/users/', {\n      method: 'post',\n      headers :{\n        \"Authorization\" : \"Bearer \"+ sessionStorage.name,\n        \"Content-Type\" : \"application/json\"\n      },\n      body: JSON.stringify({\n        id_ruangan: idl,\n      })\n    })\n    .then (response =>response.json())  \n    .then (response =>this.setState({isidata:response.list}))\n    }\n  }\n\n  deleteData(e,f){\n    const {idl} = this.state\n    var yes = window.confirm(\"Apakah anda yakin ingin menghapus data berikut: NIM = \" +e+\", ID Ruangan= \"+f);\n    if (yes === true){\n      fetch('http://192.168.2.7:8020/doorlog/deletePermission/', {\n        method: 'post',\n        headers :{\n          \"Authorization\" : \"Bearer \"+ sessionStorage.name,\n          \"Content-Type\" : \"application/json\"\n        },\n        body: JSON.stringify({\n          nim: e,\n          id_ruangan: idl\n          })\n      })\n      .then(response=>{\n        if (response.ok){\n          window.alert(\"Data berhasil dihapus\")\n        }\n        else{\n          window.alert(\"Data tidak berhasil dihapus\")\n        }\n      })\n    }\n  }\n\n  render(){\n    const {isidata,idl,dataruangan} = this.state\n    var x = 1;\n    return(\n      <div>\n          <div>\n            <Switch>\n              <Route path=\"/ruanganuser/daftar\" render={ () => <Daftarruanganuser/> } />\n            </Switch>\n          </div>\n          <div className=\"box-footer\">\n              <div>\n                  <form onSubmit={this.handleSubmitList}>\n                        <label>ID Ruangan</label>\n                        <select name=\"idl\" onChange={this.handleChange}>\n                        <option>Pilih ID Ruangan</option>\n                            {dataruangan.map(isi=>(\n                                <option key={isi.kode_ruangan} value={isi.kode_ruangan}>{isi.kode_ruangan}</option>\n                            ))}\n                        </select>\n                        <button type=\"submit\">Cari</button>\n                  </form>\n              </div>\n              <div className=\"kotakdaftarruangan\">\n                <Link to=\"/ruanganuser/daftar\">\n                  <div className=\"daftar\">\n                    <i className=\"fa fa-plus\"></i> \n                    <span> Ruangan </span>\n                  </div>\n                </Link>\n                <span>\n                  <a onClick={() => this.refresh()}>\n                    <div className=\"daftar2\">\n                      <i className=\"fa fa-refresh\"></i>\n                    </div>\n                  </a>\n                </span>\n              </div>\n              <div>\n                <table>\n                  <thead>\n                    <tr>\n                      <th>No</th>  \n                      <th>Pengguna</th>\n                      <th>Hapus</th>\n                    </tr>\n                  </thead>\n                  <tbody>\n                    {isidata.map(isi =>(\n                      <tr key={isi.pengguna}>\n                        <td>{x++}</td>\n                        <td>{isi.pengguna}</td>\n                        <td>\n                          <div className=\"editdelete\"> \n                            <a className=\"mousepointer\" onClick={() => this.deleteData(isi.pengguna,idl)}> \n                              <i className=\"fa fa-trash\"></i>\n                            </a>\n                          </div>\n                        </td>\n                      </tr>\n                    ))}\n                  </tbody>\n                </table>\n              </div> \n          </div>\n      </div>\n    )\n  }\n}\nexport default withRouter(Ruanganuser);"]},"metadata":{},"sourceType":"module"}